// Local development schema file for SQLite
// Use this for local development with: npx prisma generate --schema=prisma/schema.local.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}


model Article {
  id           String        @id @default(cuid())
  slug         String        @unique
  language     String        @default("en")
  title        String
  titleUrdu    String?
  excerpt      String
  excerptUrdu  String?
  content      String
  contentUrdu  String?
  publishedAt  DateTime?
  status       String        @default("PUBLISHED")
  affiliateKey String?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  signals Signal[]
  sources Source[]

  @@map("articles")
}

model Signal {
  id          String      @id @default(cuid())
  instrument  String
  class       String
  bias        String
  entry       Float
  stopLoss    Float
  takeProfit1 Float
  takeProfit2 Float?
  timeframe   String
  confidence  Int
  reasoning   String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt

  articleId String
  article   Article @relation(fields: [articleId], references: [id], onDelete: Cascade)

  @@map("signals")
}

model Source {
  id    String @id @default(cuid())
  title String
  url   String

  articleId String
  article   Article @relation(fields: [articleId], references: [id], onDelete: Cascade)

  @@map("sources")
}